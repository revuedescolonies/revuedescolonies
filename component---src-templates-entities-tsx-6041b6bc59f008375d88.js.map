{"version":3,"file":"component---src-templates-entities-tsx-6041b6bc59f008375d88.js","mappings":"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","sources":["webpack://revuedescolonies/./src/templates/entities.tsx","webpack://revuedescolonies/./src/utils/slugify.ts"],"sourcesContent":["import React from \"react\";\nimport Layout from \"../components/layout\"\nimport SEO from \"../components/seo\"\nimport { Box, Container, List, ListItem, ListItemText, Typography } from \"@mui/material\"\nimport { Link } from \"gatsby\"\nimport {Routes} from \"gatsby-theme-ceteicean/src/components/Ceteicean\"\nimport Renderer from \"gatsby-theme-ceteicean/src/components/Renderer\";\nimport Q from \"../gatsby-theme-ceteicean/components/Q\";\nimport Graphic from \"../gatsby-theme-ceteicean/components/Graphic\";\nimport { Ref, SafeUnchangedNode } from \"gatsby-theme-ceteicean/src/components/DefaultBehaviors\";\nimport { slugify } from \"../utils/slugify\";\n\ninterface occurenceObj {\n    pageName: string\n    pageLink: string\n    repeats: number\n}\n\ninterface Props {\n  pageContext: {\n    language: Lang\n    data: {\n      id: string,\n      name: string,\n      occurrences: occurenceObj[]\n    }\n    elements: string[]\n    prefixed: string\n  }\n}\n\ntype TEIProps = {\n  teiNode: Node,\n  availableRoutes?: string[],\n  curLang: string\n}\n\n\nconst renderRefrences = (references:occurenceObj[], id: string) => {\n    \n    return (\n      <List>\n        {references.map((refObj:occurenceObj) => (\n          <ListItem>\n            <ListItemText>\n              <Link to={`/${refObj.pageLink}?showEntities=${id}`}>{refObj.pageName} ({refObj.repeats})</Link>\n            </ListItemText>\n          </ListItem>\n        ))}\n      </List>\n    )\n}\n\nconst Title = (props: TEIProps) => {\n  const el = props.teiNode as Element\n  const lang = el.getAttribute(\"lang\")\n  console.log(lang, props.curLang)\n  if (lang !== props.curLang) return null;\n  return <Typography variant=\"h3\" component=\"h1\" gutterBottom={false} sx={{\n    marginBottom: \"2rem\"\n  }}><SafeUnchangedNode {...props}/></Typography>\n}\n\nexport default function ReferencesPage({pageContext}: Props) {\n  const {language, prefixed, elements, data} = pageContext;\n\n  const routes: Routes = {\n    \"tei-graphic\": (props) => <Box sx={{textAlign: \"center\"}}><Graphic {...props}/></Box>,\n    \"tei-ref\": Ref,\n    \"tei-q\": (props) => <Q {...props} curLang={language}/>,\n    \"tei-persname\": (props) => <Title {...props} curLang={language}/>,\n    \"tei-orgname\": (props) => <Title {...props} curLang={language}/>,\n    \"tei-placename\": (props) => <Title {...props} curLang={language}/>,\n    \"tei-title\": (props) => {\n      const el = props.teiNode as Element\n      return el.parentElement?.getAttribute(\"type\") === \"periodical\" ? <Title {...props} curLang={language}/>\n      : <SafeUnchangedNode {...props}/>\n    },\n    \"tei-note\": (props) => {\n      const el = props.teiNode as Element\n      if (el.getAttribute(\"xml:lang\") === language) {\n        return <SafeUnchangedNode {...props}/>\n      }\n      return null\n    }\n  }\n    return (\n      <Layout location={`/${language}/${slugify(data.name)}`}>\n      <SEO title={data.name} lang={\"en\"}/>\n      <Container component=\"main\" maxWidth=\"md\">\n        \n        <Renderer name={data.name} prefixed={prefixed} elements={elements} routes={routes}/>\n        <Typography variant=\"h4\" component=\"h2\" gutterBottom={false} sx={{\n          marginBottom: \"1rem\", marginTop: \"2rem\"\n        }}>{\n          language === \"fr\" ? \"Peut être trouvé dans\"\n          : \"Appears in\"\n        }</Typography>\n        {renderRefrences(data.occurrences, data.id)}\n      </Container>\n      </Layout>\n    )\n}","export function slugify(text:string) {\n  return text.toLowerCase()\n    .replace(/<[^>]+>/g, '') // remove html tags\n    .replace(/ /g,'-') // spaces become -\n    .replace(/-+/g, '-') // no repeated -\n    .replace(/[^\\p{L}-]+/gu,'') // remove all non word or - characters. TODO: this only saves ASCII characters!\n}"],"names":["renderRefrences","references","id","___EmotionJSX","List","map","refObj","ListItem","ListItemText","Link","to","pageLink","pageName","repeats","Title","props","lang","teiNode","getAttribute","console","log","curLang","Typography","variant","component","gutterBottom","sx","marginBottom","SafeUnchangedNode","ReferencesPage","_ref","pageContext","language","prefixed","elements","data","routes","Box","textAlign","Graphic","Ref","Q","_extends","_el$parentElement","parentElement","Layout","location","slugify","name","SEO","title","Container","maxWidth","Renderer","marginTop","occurrences","text","toLowerCase","replace"],"sourceRoot":""}